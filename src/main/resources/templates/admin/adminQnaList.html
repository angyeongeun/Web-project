

<!-- Shoping Cart Section Begin -->
<section class="shoping-cart spad" xmlns:th="http://www.w3.org/1999/xhtml">
    <form method="post" action="/adminTest/qnaAnswer">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <h1 style="text-align: center; margin-bottom: 30px"><strong>Q&A</strong> 관리</h1>
            </div>
            <div class="col-lg-12">
                <div class="shoping__cart__table">
                    <table >
                        <thead>
                        <tr style="border-color: #4c4c4c;" >
                            <th>No</th>
                            <th class="shoping__product" width="60%">title</th>
                            <th>name</th>
                            <th>date</th>
                            <th></th>
                        </tr>
                        </thead>
                        <tbody id="qnaList" th:each=" qnaDTO : ${qnaList}">
                        <tr style="border-color: #4c4c4c;" >
                            <td class="shoping__cart__item" style="text-align: center;">
                                <h5 id="seq" name="seq" th:text="${qnaDTO.seq}"></h5>
                            </td>
                            <td class="shoping__cart__item">
                                <a th:href="'/qnaView?seq='+${qnaDTO.seq}">
                                    <h5 id="title" th:text="${qnaDTO.title}"></h5>
                                </a>
                            </td>
                            <td class="shoping__cart__item" style="text-align: center;">
                                <h5 id="name" th:text="${qnaDTO.name}"></h5>
                            </td>
                            <td class="shoping__cart__item" style="text-align: center;">
                                <h5 id="createdDate"  th:text="${qnaDTO.createdDate}"></h5>
                            </td>
                            <td class="shoping__cart__item" style="text-align: center;">
                                <a th:href="'/adminTest/qnaAnswer?seq='+${qnaDTO.seq}">
                                    <div class="site-btn" style="cursor: pointer;">답변</div>
                                </a></button>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-12" style="padding-bottom: 10px; text-align: center;">
                <select class="selection" name="searchQnA" id="searchQnA" style="height:46px; border: 1px solid #4c4c4c;">
                    <option value="titleSearch">제목</option>
                    <option value="nameSearch">이름</option>
                </select>
                <input id="searchValue" type="text" style="height: 46px; border: 1px solid #4c4c4c; width: 70%; margin-left: 5px" placeholder="What do yo u need?">
                <button type="button" class="site-btn" id="searchBtn">SEARCH</button>
            </div>
            <div class="col-lg-12">
                <div th:style="${qnaList.isEmpty() ? 'display:none':'display:flex'}"
                     class="product__pagination pagination justify-content-center">
                    <div><a th:href="@{'/adminTest/adminQnaList?page=0'}"><i class="fa fa-long-arrow-left"></i></a></div>
                    <div th:each="i : ${#numbers.sequence(startPage, endPage)}"><a th:href="@{'/adminTest/adminQnaList?page='+${i}}"><i th:text="${i}+1" ></i></a></div>
                    <div><a th:href="@{'/adminTest/adminQnaList?page='+${endEndPage}}"><i class="fa fa-long-arrow-right" ></i></a></div>
                </div>
            </div>
        </div>
    </div>
    </form>
</section>
<!-- Shoping Cart Section End -->

<script type="text/javascript" src="http://code.jquery.com/jquery-3.5.1.min.js"></script>
<script type="text/javascript">
    function answerQnA(seq) {
        alert(seq);
        $.ajax({
            method: 'POST',
            url: '/adminTest/qnaAnswer',
            data: 'seq='+seq,
        }).done(function () {
        }).fail(function (error) {
            alert(JSON.stringify(error));
        });
    }

    $("#searchBtn").click(function () {

        $('#qnaList').empty();
        $('.pagination').empty();

        var data ={"searchValue" :$('#searchValue').val(),
                    "searchOption" :$('#searchQnA option:selected').val()};

        $.ajax({
            url:'/adminTest/searchQna',
            type: 'POST',
            data: data,
            dataType: 'json'
        }).done(function (data) {
            alert(JSON.stringify(data.list));

            // $.each(data.list, function (index, items) {
            //     var useremail = items.email;
            //     var html ='';
            //     html +='<tr>';
            //     html +='<td>'+items.email+'</td>';
            //     html +='<td>'+items.name+'</td>';
            //     html +='<td>'+items.address+'</td>';
            //     html +='<td>'+items.role+'</td>';
            //     html +='<td>'+items.enable+'</td>';
            //     if(!items.enable){
            //         html +='<td><input type="button"  class="cancleBtn btn btn-primary" value="해지"></td>';
            //     }else{
            //         html+='<td></td>';
            //     }
            //     html +='</tr>';
            //     $('#userInfo').append(html);
            //     $('.cancleBtn').attr("data-email",items.email);
            //
            //
            // });
            // var paginationCode='';
            // /*
            //             paginationCode += '<li class="page-item"><a class="page-link">Previous</a></li>';
            // */
            // for(var i=1; i<=data.pageNum; i++){
            //     paginationCode += '<li class="page-item"><a class="page-link" onclick="pageClick('+i+')">'+i;
            //     paginationCode += '</a></li>'
            // }
            // /*
            //             paginationCode +='<li class="page-item"><a class="page-link">Next</a></li>';
            // */
            // $('.pagination').append(paginationCode);

        }).fail(function (error) {
            alert(JSON.stringify(error));
        });
    });
</script>